const cartInner=document.querySelector(".modal-body");let cartData=localStorage.getItem("cart");cartData=cartData?JSON.parse(cartData):[];const buttons=document.querySelectorAll("button");buttons.forEach((t=>{t.addEventListener("click",(function(){event.preventDefault()}))}));const productsDiv=document.getElementById("products"),subTotalElement=document.querySelector(".checkout_subtotal_price"),totalElement=document.querySelector(".checkout_total_price");let sum=0,totalsum=sum;function showProducts(){cartData&&Array.isArray(cartData)&&cartData.forEach((t=>{const e=document.createElement("div");e.classList.add("checkout_product_block"),e.innerHTML=`\n      <div class="checkout_product checkout_flex">\n      <div class="first_part_checkout">\n        <img\n          src="${t.productImage}"\n          alt=""\n          class="checkout_product_image"\n        />\n        <div class="image_popup"><p class="quantity">${t.productAmount}</p></div>\n        <div style="display:flex;flex-direction: column;">\n        <p class="checkout_product_title" style="margin-bottom: 0;padding-bottom: 2px;">${t.productTitle}</p>\n        <p style="margin-bottom: 0;padding-bottom:2px;font-size: 10px;color:#00000080;">Color: ${t.productColor}</p>\n        <p style="margin-bottom: 0;padding-bottom:2px;font-size: 10px;color:#00000080;">Delivery: <span class="delvieryClass">Default Shipping</span></p>\n        </div>\n      </div>\n      <p class="checkout_product_price">${t.productPrice}</p>\n    </div>`,productsDiv.appendChild(e);const n=t.productPrice.replace(",","."),o=parseFloat(n.replace("$",""))*t.productAmount;sum+=o,sum=sum.toFixed(2),"fast"===t.productDelivery?(totalsum=(Number(sum)+15).toFixed(2),document.querySelector(".checkout_shipping_price").innerHTML="$15.00"):totalsum=Number(sum).toFixed(2)}))}showProducts(),subTotalElement.innerHTML=`$${sum}`;const couponButton=document.querySelector(".applyCoupon"),couponText=document.querySelector(".checkout_coupons_price");let couponSale;couponButton.addEventListener("click",(function(){const t=document.querySelector("#coupon").value;fetch("/check-coupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:`${t}`})}).then((t=>{200===t.status?(document.querySelector(".couponStatus").innerHTML="Applied successfully",document.querySelector(".couponStatus").style.color="#40d44f",subTotalElement.innerHTML=`$${sum}`,totalElement.innerHTML=`$${totalsum}`,couponText.innerHTML="-10%",window.scrollTo(0,0)):(document.querySelector(".couponStatus").innerHTML="Coupon not exists",document.querySelector(".couponStatus").style.color="#d44040")}))})),totalElement.innerHTML=`$${totalsum}`;const currentForm=document.getElementById("checkoutForm");let allFormsStatus=!1;currentForm.addEventListener("submit",(function(t){}));const expand=document.getElementById("expandInfo"),secondInfo=document.getElementById("secondInfo");function updateCart(){null!==cartData&&cartData.length>0?cartInner.innerHTML="":cartInner.innerHTML="Your cart is empty",localStorage.setItem("cart",JSON.stringify(cartData)),cartData.forEach(((t,e)=>{const n=t.productTitle,o=t.productAmount,c=document.createElement("div");c.classList.add("cart_product");const a=document.createElement("p");a.classList.add("product_title_cart");const r=document.createElement("p");r.classList.add("amountParagr");const u=document.createElement("button"),d=document.createElement("button"),l=document.createElement("button"),s=document.createElement("div");d.textContent="-",l.textContent="+",d.classList.add("cartDecrease"),l.classList.add("cartIncrease"),u.classList.add("delete"),u.textContent="x",s.appendChild(d),s.appendChild(r),s.appendChild(l),s.classList.add("amountBox"),a.textContent=n,r.textContent=o,u.addEventListener("click",(()=>{cartData.splice(e,1),updateCart(),"/catalog"!==window.location.pathname&&"/checkout"!==window.location.pathname||location.reload()})),c.appendChild(a),c.appendChild(s),c.appendChild(u),cartInner.appendChild(c)}))}expand.addEventListener("click",(function(){secondInfo.style.display="block",expand.style.display="none"})),cartInner.innerHTML="Your cart is empty",updateCart();const productAmountInner2=document.querySelectorAll(".amountParagr"),minusButtons2=document.querySelectorAll(".cartDecrease"),plusButtons2=document.querySelectorAll(".cartIncrease");function updateCartInner(t,e){const n=cartData[t].productTitle,o=cartData[t].productPrice,c=cartData[t];cartData[t]={...c,productTitle:n,productAmount:e,productPrice:o},localStorage.setItem("cart",JSON.stringify(cartData))}minusButtons2.forEach(((t,e)=>{t.addEventListener("click",(function(){const t=parseInt(productAmountInner2[e].innerHTML);t>1&&(productAmountInner2[e].innerHTML=t-1,updateCartInner(e,t-1),location.reload())}))})),plusButtons2.forEach(((t,e)=>{t.addEventListener("click",(function(){const t=parseInt(productAmountInner2[e].innerHTML);productAmountInner2[e].innerHTML=t+1,updateCartInner(e,t+1),location.reload()}))}));